services:
    query_constructor.creator:
        class: FOD\QueryConstructor\Creator\Creator
        arguments:
            - '@doctrine.orm.entity_manager'
            - '@query_constructor.registry'
            - '@query_constructor.joiner'

    query_constructor.joiner:
        class: FOD\QueryConstructor\Creator\Joiner
        arguments:
            - '@doctrine.orm.entity_manager'
            - '@query_constructor.registry'

    query_constructor.serializer:
        class: FOD\QueryConstructor\Serializer\Serializer
        arguments: ['@doctrine.orm.entity_manager']

    query_constructor.registry:
        class: FOD\QueryConstructor\Metadata\Registry
        arguments: ['@query_constructor.discovery']

    query_constructor.reader:
        class: FOD\QueryConstructor\Mapping\Reader
        arguments: ['@doctrine.orm.entity_manager', '@annotation_reader']

    query_constructor.discovery:
        class: FOD\QueryConstructor\Metadata\DoctrineDiscovery
        arguments:
            - '@doctrine.orm.entity_manager'
            - '@query_constructor.reader'
